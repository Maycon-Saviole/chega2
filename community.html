<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ü§ù CHEGA+ - Rede de Apoio</title>
    <style>
        /* ESTILOS PR√ÅTICOS E REALISTAS */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Arial, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        /* Cabe√ßalho */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .back-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 50px;
            font-size: 1em;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
        }
        
        .back-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        .title {
            font-size: 1.8em;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        /* Status da rede */
        .network-status {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .status-card {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }
        
        .status-icon {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .status-value {
            font-size: 1.8em;
            font-weight: bold;
            margin: 10px 0;
            color: #4cd964;
        }
        
        .status-label {
            font-size: 0.9em;
            opacity: 0.8;
        }
        
        /* Funcionalidades principais */
        .features {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 30px 0;
        }
        
        .feature-card {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 15px;
            padding: 25px 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }
        
        .feature-card:hover {
            background: rgba(255, 255, 255, 0.25);
            border-color: #4cd964;
            transform: translateY(-5px);
        }
        
        .feature-icon {
            font-size: 2.5em;
            margin-bottom: 15px;
        }
        
        .feature-title {
            font-size: 1.2em;
            margin-bottom: 10px;
            color: #4cd964;
        }
        
        .feature-desc {
            font-size: 0.9em;
            opacity: 0.9;
        }
        
        /* Zonas seguras */
        .safe-zones {
            background: rgba(76, 217, 100, 0.2);
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
            border: 2px solid rgba(76, 217, 100, 0.3);
        }
        
        .safe-zones h3 {
            margin-bottom: 20px;
            color: #4cd964;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .zone-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .zone-item {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 10px;
            padding: 15px;
        }
        
        .zone-name {
            font-weight: bold;
            margin-bottom: 5px;
            color: #4cd964;
        }
        
        .zone-desc {
            font-size: 0.9em;
            opacity: 0.9;
        }
        
        /* Sistema de check-in */
        .checkin-system {
            background: rgba(0, 122, 255, 0.2);
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
            border: 2px solid rgba(0, 122, 255, 0.3);
        }
        
        .checkin-btn {
            background: #007aff;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin: 20px auto;
            transition: transform 0.3s;
        }
        
        .checkin-btn:hover {
            transform: scale(1.05);
        }
        
        /* Alertas da comunidade */
        .community-alerts {
            margin: 30px 0;
        }
        
        .alert-card {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 5px solid #ff9500;
        }
        
        .alert-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 10px;
        }
        
        .alert-icon {
            font-size: 1.5em;
        }
        
        .alert-title {
            font-weight: bold;
            color: #ff9500;
        }
        
        .alert-time {
            font-size: 0.8em;
            opacity: 0.7;
            margin-left: auto;
        }
        
        .alert-desc {
            opacity: 0.9;
        }
        
        /* Bot√µes de a√ß√£o r√°pida */
        .quick-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin: 30px 0;
        }
        
        .action-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 12px 20px;
            border-radius: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
        }
        
        .action-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        
        /* Configura√ß√µes */
        .settings {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
        }
        
        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .setting-label {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }
        
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255, 255, 255, 0.3);
            transition: .4s;
            border-radius: 24px;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background-color: #4cd964;
        }
        
        input:checked + .slider:before {
            transform: translateX(26px);
        }
        
        /* Responsivo */
        @media (max-width: 600px) {
            .network-status, .features {
                grid-template-columns: 1fr;
            }
            
            .zone-list {
                grid-template-columns: 1fr;
            }
            
            .container {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Cabe√ßalho -->
        <div class="header">
            <a href="index.html" class="back-btn">
                ‚Üê Voltar
            </a>
            
            <h1 class="title">
                <span>ü§ù</span>
                <span>CHEGA+</span>
            </h1>
        </div>

        <!-- Introdu√ß√£o -->
        <div style="text-align: center; margin-bottom: 30px;">
            <h2>Rede de Apoio e Seguran√ßa</h2>
            <p style="opacity: 0.9; margin-top: 10px;">
                Conecte-se com recursos de seguran√ßa, compartilhe informa√ß√µes √∫teis e encontre ajuda quando precisar.
            </p>
        </div>

        <!-- Status da rede -->
        <div class="network-status">
            <div class="status-card">
                <div class="status-icon">üë•</div>
                <div class="status-value" id="communityCount">0</div>
                <div class="status-label">Usu√°rias na cidade</div>
            </div>
            
            <div class="status-card">
                <div class="status-icon">üìç</div>
                <div class="status-value" id="zonesCount">0</div>
                <div class="status-label">Zonas seguras</div>
            </div>
        </div>

        <!-- Funcionalidades principais -->
        <h3 style="margin: 30px 0 20px 0; color: #4cd964;">Recursos Dispon√≠veis</h3>
        <div class="features">
            <div class="feature-card" onclick="reportSafeZone()">
                <div class="feature-icon">üìç</div>
                <h4 class="feature-title">Zona Segura</h4>
                <p class="feature-desc">Marque locais seguros na sua √°rea</p>
            </div>
            
            <div class="feature-card" onclick="shareCheckIn()">
                <div class="feature-icon">‚úÖ</div>
                <h4 class="feature-title">Check-in Seguro</h4>
                <p class="feature-desc">Registre que est√° bem em locais p√∫blicos</p>
            </div>
            
            <div class="feature-card" onclick="reportIncident()">
                <div class="feature-icon">‚ö†Ô∏è</div>
                <h4 class="feature-title">Reportar Incidente</h4>
                <p class="feature-desc">Alerta sobre situa√ß√µes de risco</p>
            </div>
            
            <div class="feature-card" onclick="viewSafetyTips()">
                <div class="feature-icon">üí°</div>
                <h4 class="feature-title">Dicas de Seguran√ßa</h4>
                <p class="feature-desc">Aprenda e compartilhe boas pr√°ticas</p>
            </div>
        </div>

        <!-- Sistema de Check-in -->
        <div class="checkin-system">
            <h3>‚úÖ Check-in de Seguran√ßa</h3>
            <p style="margin: 15px 0; opacity: 0.9;">
                Registre que voc√™ chegou bem em um local. Seus contatos de confian√ßa receber√£o uma notifica√ß√£o.
            </p>
            
            <div style="display: flex; gap: 15px; flex-wrap: wrap; justify-content: center;">
                <button class="checkin-btn" onclick="quickCheckIn('Estou em casa')">
                    <span>üè†</span>
                    <span>Cheguei em casa</span>
                </button>
                
                <button class="checkin-btn" onclick="quickCheckIn('Estou no trabalho')">
                    <span>üíº</span>
                    <span>Cheguei no trabalho</span>
                </button>
                
                <button class="checkin-btn" onclick="customCheckIn()">
                    <span>üìç</span>
                    <span>Check-in personalizado</span>
                </button>
            </div>
        </div>

        <!-- Zonas Seguras -->
        <div class="safe-zones">
            <h3><span>üõ°Ô∏è</span> Zonas Seguras Pr√≥ximas</h3>
            
            <div class="zone-list" id="zoneList">
                <!-- Zonas ser√£o carregadas aqui -->
                <div class="zone-item">
                    <div class="zone-name">Farm√°cia 24h</div>
                    <div class="zone-desc">Aberto 24 horas, c√¢meras de seguran√ßa</div>
                </div>
                
                <div class="zone-item">
                    <div class="zone-name">Posto Policial</div>
                    <div class="zone-desc">Avenida Principal, 24h</div>
                </div>
            </div>
            
            <button class="action-btn" onclick="addSafeZone()" style="margin-top: 20px;">
                <span>‚ûï</span>
                <span>Adicionar Zona Segura</span>
            </button>
        </div>

        <!-- Alertas da Comunidade -->
        <div class="community-alerts">
            <h3 style="margin-bottom: 20px; color: #ff9500;">‚ö†Ô∏è Alertas Recentes</h3>
            
            <div class="alert-card">
                <div class="alert-header">
                    <div class="alert-icon">üöß</div>
                    <div class="alert-title">Obras na Rua</div>
                    <div class="alert-time">Hoje 18:30</div>
                </div>
                <div class="alert-desc">
                    Rua das Flores bloqueada para obras. Use rotas alternativas √† noite.
                </div>
            </div>
            
            <div class="alert-card">
                <div class="alert-header">
                    <div class="alert-icon">üí°</div>
                    <div class="alert-title">Ilumina√ß√£o P√∫blica</div>
                    <div class="alert-time">Ontem 21:15</div>
                </div>
                <div class="alert-desc">
                    Postes queimados na Pra√ßa Central. Evitar √°rea √† noite.
                </div>
            </div>
            
            <button class="action-btn" onclick="createAlert()" style="width: 100%; justify-content: center; margin-top: 15px;">
                <span>üì¢</span>
                <span>Criar Novo Alerta</span>
            </button>
        </div>

        <!-- A√ß√µes R√°pidas -->
        <h3 style="margin: 30px 0 20px 0; color: #4cd964;">üîÑ A√ß√µes R√°pidas</h3>
        <div class="quick-actions">
            <button class="action-btn" onclick="shareLocation()">
                <span>üìç</span>
                <span>Compartilhar Localiza√ß√£o</span>
            </button>
            
            <button class="action-btn" onclick="safetyTips()">
                <span>üìö</span>
                <span>Dicas de Seguran√ßa</span>
            </button>
            
            <button class="action-btn" onclick="emergencyNumbers()">
                <span>üìû</span>
                <span>N√∫meros de Emerg√™ncia</span>
            </button>
            
            <button class="action-btn" onclick="downloadSafetyGuide()">
                <span>üì•</span>
                <span>Guia de Seguran√ßa</span>
            </button>
        </div>

        <!-- Configura√ß√µes -->
        <div class="settings">
            <h3 style="margin-bottom: 20px; color: #4cd964;">‚öôÔ∏è Configura√ß√µes CHEGA+</h3>
            
            <div class="setting-item">
                <div class="setting-label">
                    <span>üîî</span>
                    <span>Receber alertas da comunidade</span>
                </div>
                <label class="switch">
                    <input type="checkbox" id="receiveAlerts" checked>
                    <span class="slider"></span>
                </label>
            </div>
            
            <div class="setting-item">
                <div class="setting-label">
                    <span>üìç</span>
                    <span>Compartilhar zonas seguras</span>
                </div>
                <label class="switch">
                    <input type="checkbox" id="shareZones" checked>
                    <span class="slider"></span>
                </label>
            </div>
            
            <div class="setting-item">
                <div class="setting-label">
                    <span>üë§</span>
                    <span>Perfil an√¥nimo</span>
                </div>
                <label class="switch">
                    <input type="checkbox" id="anonymousMode">
                    <span class="slider"></span>
                </label>
            </div>
            
            <div style="text-align: center; margin-top: 20px;">
                <button class="action-btn" onclick="saveSettings()">
                    <span>üíæ</span>
                    <span>Salvar Configura√ß√µes</span>
                </button>
            </div>
        </div>

        <!-- Informa√ß√µes -->
        <div style="background: rgba(0,0,0,0.3); padding: 20px; border-radius: 15px; margin-top: 30px;">
            <h4 style="color: #4cd964; margin-bottom: 15px;">‚ÑπÔ∏è Como funciona o CHEGA+</h4>
            <ul style="padding-left: 20px; opacity: 0.9;">
                <li>Todas as informa√ß√µes s√£o <strong>an√¥nimas</strong></li>
                <li>Nenhum dado pessoal √© compartilhado</li>
                <li>Zonas seguras s√£o validadas pela comunidade</li>
                <li>Alertas s√£o verificados antes da publica√ß√£o</li>
                <li>Sua privacidade √© nossa prioridade</li>
            </ul>
        </div>
    </div>

    <!-- Modal para a√ß√µes -->
    <div id="actionModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1000; align-items: center; justify-content: center;">
        <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 30px; border-radius: 20px; max-width: 500px; width: 90%;">
            <h2 id="modalTitle" style="margin-bottom: 20px;"></h2>
            <div id="modalContent" style="margin-bottom: 25px;"></div>
            <div style="display: flex; gap: 15px;">
                <button onclick="confirmAction()" style="flex: 1; background: #4cd964; color: white; border: none; padding: 15px; border-radius: 10px; cursor: pointer;">
                    Confirmar
                </button>
                <button onclick="closeModal()" style="flex: 1; background: rgba(255,255,255,0.2); color: white; border: none; padding: 15px; border-radius: 10px; cursor: pointer;">
                    Cancelar
                </button>
            </div>
        </div>
    </div>

    <script>
        // =========== SISTEMA PR√ÅTICO DE COMUNIDADE ===========
        
        // Armazenamento local
        const COMMUNITY_STORAGE = 'chega_community_data';
        
        // =========== CARREGAR DADOS ===========
        function loadCommunityData() {
            const data = localStorage.getItem(COMMUNITY_STORAGE);
            return data ? JSON.parse(data) : {
                safeZones: [],
                checkIns: [],
                alerts: [],
                settings: {
                    receiveAlerts: true,
                    shareZones: true,
                    anonymousMode: false
                }
            };
        }
        
        // =========== SALVAR DADOS ===========
        function saveCommunityData(data) {
            localStorage.setItem(COMMUNITY_STORAGE, JSON.stringify(data));
        }
        
        // =========== INICIALIZAR ===========
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ü§ù CHEGA+ inicializado');
            
            // Carregar dados
            const data = loadCommunityData();
            
            // Atualizar contadores
            updateCounters(data);
            
            // Carregar configura√ß√µes
            loadSettings(data.settings);
            
            // Carregar zonas seguras
            loadSafeZones(data.safeZones);
        });
        
        // =========== ATUALIZAR CONTADORES ===========
        function updateCounters(data) {
            // Simular usu√°rias na cidade (apenas para demonstra√ß√£o)
            document.getElementById('communityCount').textContent = 
                Math.floor(Math.random() * 100) + 50;
            
            // Zonas seguras reais
            document.getElementById('zonesCount').textContent = 
                data.safeZones.length;
        }
        
        // =========== CARREGAR CONFIGURA√á√ïES ===========
        function loadSettings(settings) {
            document.getElementById('receiveAlerts').checked = settings.receiveAlerts;
            document.getElementById('shareZones').checked = settings.shareZones;
            document.getElementById('anonymousMode').checked = settings.anonymousMode;
        }
        
        // =========== SALVAR CONFIGURA√á√ïES ===========
        function saveSettings() {
            const data = loadCommunityData();
            
            data.settings = {
                receiveAlerts: document.getElementById('receiveAlerts').checked,
                shareZones: document.getElementById('shareZones').checked,
                anonymousMode: document.getElementById('anonymousMode').checked
            };
            
            saveCommunityData(data);
            alert('‚úÖ Configura√ß√µes salvas!');
        }
        
        // =========== ZONAS SEGURAS ===========
        function loadSafeZones(zones) {
            const zoneList = document.getElementById('zoneList');
            
            if (zones.length === 0) {
                // Zonas padr√£o (apenas para demonstra√ß√£o)
                zoneList.innerHTML = `
                    <div class="zone-item">
                        <div class="zone-name">Farm√°cia 24h</div>
                        <div class="zone-desc">Aberto 24 horas, c√¢meras de seguran√ßa</div>
                    </div>
                    
                    <div class="zone-item">
                        <div class="zone-name">Posto Policial</div>
                        <div class="zone-desc">Avenida Principal, 24h</div>
                    </div>
                    
                    <div class="zone-item">
                        <div class="zone-name">Shopping Center</div>
                        <div class="zone-desc">Seguran√ßa privada, estacionamento iluminado</div>
                    </div>
                    
                    <div class="zone-item">
                        <div class="zone-name">Hospital Municipal</div>
                        <div class="zone-desc">Recep√ß√£o 24h, seguran√ßa no local</div>
                    </div>
                `;
            }
        }
        
        // =========== FUN√á√ïES PRINCIPAIS ===========
        
        // 1. REPORTAR ZONA SEGURA
        function reportSafeZone() {
            openModal(
                'üìç Reportar Zona Segura',
                `Informe um local seguro na sua √°rea:
                <br><br>
                <input type="text" id="zoneName" placeholder="Nome do local (ex: Farm√°cia 24h)" style="width: 100%; padding: 10px; margin: 10px 0; border-radius: 5px; border: 1px solid rgba(255,255,255,0.3); background: rgba(255,255,255,0.1); color: white;">
                <br>
                <textarea id="zoneDescription" placeholder="Descri√ß√£o (ex: Aberto 24h, c√¢meras, bem iluminado)" style="width: 100%; padding: 10px; margin: 10px 0; border-radius: 5px; border: 1px solid rgba(255,255,255,0.3); background: rgba(255,255,255,0.1); color: white; height: 80px;"></textarea>
                <br>
                <small style="opacity: 0.8;">Esta informa√ß√£o ser√° compartilhada anonimamente com a comunidade.</small>`
            );
            
            window.confirmAction = function() {
                const name = document.getElementById('zoneName').value;
                const desc = document.getElementById('zoneDescription').value;
                
                if (name && desc) {
                    const data = loadCommunityData();
                    
                    data.safeZones.push({
                        id: Date.now(),
                        name: name,
                        description: desc,
                        timestamp: new Date().toISOString(),
                        location: 'Pr√≥ximo √† sua √°rea',
                        verified: false
                    });
                    
                    saveCommunityData(data);
                    alert('‚úÖ Zona segura reportada! Obrigada por contribuir.');
                    
                    // Atualizar lista
                    loadSafeZones(data.safeZones);
                    updateCounters(data);
                } else {
                    alert('Por favor, preencha todos os campos.');
                    return;
                }
                
                closeModal();
            };
        }
        
        // 2. CHECK-IN DE SEGURAN√áA
        function quickCheckIn(location) {
            const message = `Confirmar check-in em: <strong>${location}</strong>?<br><br>Seus contatos de confian√ßa ser√£o notificados.`;
            
            openModal('‚úÖ Check-in de Seguran√ßa', message);
            
            window.confirmAction = function() {
                // Obter localiza√ß√£o real
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(
                        (position) => {
                            const lat = position.coords.latitude;
                            const lng = position.coords.longitude;
                            
                            // Salvar check-in
                            const data = loadCommunityData();
                            data.checkIns.push({
                                location: location,
                                coordinates: { lat, lng },
                                timestamp: new Date().toISOString()
                            });
                            saveCommunityData(data);
                            
                            // Notificar contatos
                            notifyCheckIn(location, lat, lng);
                            
                            alert(`‚úÖ Check-in registrado em ${location}!`);
                        },
                        () => {
                            // Fallback sem localiza√ß√£o
                            alert(`‚úÖ Check-in registrado em ${location} (sem localiza√ß√£o precisa).`);
                        }
                    );
                } else {
                    alert(`‚úÖ Check-in registrado em ${location}!`);
                }
                
                closeModal();
            };
        }
        
        function customCheckIn() {
            const location = prompt('Onde voc√™ est√° fazendo check-in? (ex: Restaurante, Parque, Trabalho)');
            if (location) {
                quickCheckIn(location);
            }
        }
        
        function notifyCheckIn(location, lat, lng) {
            // Na vers√£o completa, enviaria notifica√ß√£o para contatos
            console.log(`üì± Notificando contatos: Check-in em ${location} (${lat}, ${lng})`);
            
            // Simula√ß√£o
            setTimeout(() => {
                alert(`üì± Seus contatos foram notificados do seu check-in em ${location}.`);
            }, 500);
        }
        
        // 3. REPORTAR INCIDENTE
        function reportIncident() {
            openModal(
                '‚ö†Ô∏è Reportar Incidente',
                `Descreva a situa√ß√£o de risco:
                <br><br>
                <select id="incidentType" style="width: 100%; padding: 10px; margin: 10px 0; border-radius: 5px; border: 1px solid rgba(255,255,255,0.3); background: rgba(255,255,255,0.1); color: white;">
                    <option value="">Selecione o tipo</option>
                    <option value="harassment">Ass√©dio/Importuna√ß√£o</option>
                    <option value="lighting">Ilumina√ß√£o p√∫blica ruim</option>
                    <option value="suspicious">Comportamento suspeito</option>
                    <option value="obstruction">Via obstru√≠da/perigosa</option>
                    <option value="other">Outro</option>
                </select>
                <br>
                <textarea id="incidentDescription" placeholder="Descri√ß√£o detalhada (opcional)" style="width: 100%; padding: 10px; margin: 10px 0; border-radius: 5px; border: 1px solid rgba(255,255,255,0.3); background: rgba(255,255,255,0.1); color: white; height: 80px;"></textarea>
                <br>
                <small style="opacity: 0.8;">Este relato √© an√¥nimo e ajuda outras mulheres a evitarem riscos.</small>`
            );
            
            window.confirmAction = function() {
                const type = document.getElementById('incidentType').value;
                const desc = document.getElementById('incidentDescription').value;
                
                if (type) {
                    const data = loadCommunityData();
                    
                    data.alerts.push({
                        type: type,
                        description: desc,
                        timestamp: new Date().toISOString(),
                        status: 'pending'
                    });
                    
                    saveCommunityData(data);
                    alert('‚ö†Ô∏è Incidente reportado! Obrigada por alertar a comunidade.');
                    
                    // Em vers√£o completa, enviaria para modera√ß√£o
                } else {
                    alert('Por favor, selecione o tipo de incidente.');
                    return;
                }
                
                closeModal();
            };
        }
        
        // 4. DICAS DE SEGURAN√áA
        function viewSafetyTips() {
            const tips = [
                "üí° Ande sempre com o celular carregado",
                "üìç Compartilhe sua localiza√ß√£o com algu√©m de confian√ßa",
                "üëÇ Use apenas um fone de ouvido na rua",
                "üëú Mantenha bolsas e mochilas √† frente do corpo",
                "üö∂‚Äç‚ôÄÔ∏è Caminhe em dire√ß√£o oposta ao tr√¢nsito",
                "üì± Memorize n√∫meros de emerg√™ncia",
                "üî¶ Use a lanterna do celular em √°reas escuras",
                "üö´ Evite atalhos por √°reas desertas √† noite",
                "üó£Ô∏è Grite 'Fogo!' em vez de 'Socorro!' - chama mais aten√ß√£o",
                "üìç Conhe√ßa estabelecimentos 24h na sua rota"
            ];
            
            let tipsHTML = '<h3>üí° Dicas de Seguran√ßa</h3><ul style="text-align: left; padding-left: 20px;">';
            tips.forEach(tip => {
                tipsHTML += `<li style="margin: 10px 0;">${tip}</li>`;
            });
            tipsHTML += '</ul>';
            
            openModal('üí° Dicas de Seguran√ßa', tipsHTML);
            
            window.confirmAction = function() {
                closeModal();
            };
        }
        
        // 5. CRIAR ALERTA
        function createAlert() {
            const alertText = prompt('Digite o alerta para a comunidade (ex: "Ilumina√ß√£o quebrada na Rua X"):');
            if (alertText) {
                const data = loadCommunityData();
                
                data.alerts.push({
                    type: 'community_alert',
                    description: alertText,
                    timestamp: new Date().toISOString(),
                    status: 'active'
                });
                
                saveCommunityData(data);
                alert('üì¢ Alerta criado e compartilhado com a comunidade!');
            }
        }
        
        // 6. ADICIONAR ZONA SEGURA
        function addSafeZone() {
            reportSafeZone();
        }
        
        // 7. COMPARTILHAR LOCALIZA√á√ÉO
        function shareLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        const lat = position.coords.latitude;
                        const lng = position.coords.longitude;
                        const mapsUrl = `https://maps.google.com/?q=${lat},${lng}`;
                        
                        if (navigator.share) {
                            navigator.share({
                                title: 'Minha Localiza√ß√£o',
                                text: 'Estou aqui:',
                                url: mapsUrl
                            });
                        } else {
                            navigator.clipboard.writeText(mapsUrl);
                            alert('üìç Link da localiza√ß√£o copiado! Cole em qualquer app.');
                        }
                    },
                    () => {
                        alert('N√£o foi poss√≠vel obter sua localiza√ß√£o.');
                    }
                );
            } else {
                alert('Seu navegador n√£o suporta geolocaliza√ß√£o.');
            }
        }
        
        // 8. DICAS DE SEGURAN√áA
        function safetyTips() {
            viewSafetyTips();
        }
        
        // 9. N√öMEROS DE EMERG√äNCIA
        function emergencyNumbers() {
            const numbers = {
                '190': 'Pol√≠cia Militar',
                '192': 'SAMU (Ambul√¢ncia)',
                '193': 'Bombeiros',
                '180': 'Central de Atendimento √† Mulher',
                '181': 'Disque Den√∫ncia',
                '100': 'Direitos Humanos'
            };
            
            let numbersHTML = '<h3>üìû N√∫meros de Emerg√™ncia</h3>';
            for (const [number, service] of Object.entries(numbers)) {
                numbersHTML += `
                    <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; margin: 10px 0;">
                        <div style="font-weight: bold; font-size: 1.3em;">${number}</div>
                        <div>${service}</div>
                        <button onclick="callNumber('${number}')" style="background: #4cd964; color: white; border: none; padding: 8px 15px; border-radius: 5px; margin-top: 10px; cursor: pointer;">
                            üìû Ligar
                        </button>
                    </div>
                `;
            }
            
            openModal('üìû N√∫meros de Emerg√™ncia', numbersHTML);
            
            window.confirmAction = function() {
                closeModal();
            };
        }
        
        function callNumber(number) {
            window.open(`tel:${number}`, '_blank');
        }
        
        // 10. BAIXAR GUIA DE SEGURAN√áA
        function downloadSafetyGuide() {
            const guide = `
                GUIA DE SEGURAN√áA PESSOAL - CHEGA!
                
                1. PLANTEJA SUAS ROTAS
                - Evite caminhos desertos e mal iluminados
                - Conhe√ßa estabelecimentos abertos 24h no seu trajeto
                - Informe algu√©m sobre seu destino e hor√°rio previsto
                
                2. EM CASO DE EMERG√äNCIA
                - Use o bot√£o vermelho do app CHEGA!
                - Grite "Fogo!" para chamar mais aten√ß√£o
                - Corra para locais p√∫blicos e movimentados
                - Use a fun√ß√£o de sirene e flash do app
                
                3. SEGURAN√áA DIGITAL
                - Mantenha o app CHEGA! sempre atualizado
                - Configure seus contatos de emerg√™ncia
                - Use a fun√ß√£o de acompanhamento de trajeto
                
                4. RECURSOS √öTEIS
                - Zonas seguras mapeadas pela comunidade
                - Check-in de seguran√ßa em locais p√∫blicos
                - Alertas sobre √°reas de risco
                
                Baixe o app completo em: [link-do-app]
            `;
            
            const blob = new Blob([guide], {type: 'text/plain'});
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'guia-seguranca-chega.txt';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            alert('üì• Guia de seguran√ßa baixado!');
        }
        
        // =========== FUN√á√ïES DO MODAL ===========
        function openModal(title, content) {
            document.getElementById('modalTitle').innerHTML = title;
            document.getElementById('modalContent').innerHTML = content;
            document.getElementById('actionModal').style.display = 'flex';
        }
        
        function closeModal() {
            document.getElementById('actionModal').style.display = 'none';
        }
    </script>
</body>
</html>
